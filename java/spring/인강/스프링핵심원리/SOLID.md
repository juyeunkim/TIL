# 좋은 객체 지향 설계의 5가지 원칙 (SOLID)


## SRP : 단일 책임 원칙

- 한 클래스는 하나의 책임만 가져야 한다

  > 하나의 책임이란? 의미가 모호하다
  >
  > - 클 수 있고, 작을 수 있다
  > - 문맥과 상황에 따라 다르다

- 단일 책임의 기준은 **변경**이다.

  변경이 있을 때 파급 효과가 적으면 단일 책임 원칙을 잘 따른 것

  > Ex) UI 변경, 객체의 생성과 사용을 분리  



## OCP : 개방-폐쇄 원칙

- ⭐️ 매우 중요 ⭐️

- 소프트웨어 요소는 **확장에는 열려** 있으나 **변경에는 닫혀** 있어야 한다

- **다형성**을 활용

- 인터페이스를 구현한 새로운 클래스를 하나 만들어서 새로운 기능을 구현

  > 기존 코드를 변경하지 않고 사용

### 문제점

- 예시

~~~java
public class MemberService {
  private MemberRepository memberRepository = new MemmoryMemberRepository();
}
~~~

~~~java
public class MemberService {
  // private MemberRepository memberRepository = new MemmoryMemberRepository();
  private MemberRepository memberRepository = new JdbcMemberRepository(); 
}
~~~

>  MemberService 클라이언트가 구현 클래스를 직접 선택

- 구현 객체를 변경하려면 클라이언트 코드를 변경해야한다.
- 분명 다형성을 사용했지만 OCP 원칙을 지킬 수 없다

### 해결 방법

객체를 생성하고, 연관관계를 맺어주는 변도의 조립, 설정자가 필요하다.

==> 스프링 컨테이너가 해결 (**DI, IoC**)



## LSP : 리스코프 치환 원칙

- 프로그램의 객체는 정확성을 깨뜨리지 않으면서 하위 타입의 인스턴스로 바꿀 수 있어야한다

  > 기능적으로 정상 동작하는것을 보장해줘야한다

- 다형성에서 하위 클래스는 인터페이스 규악을 다 지켜야 한다는 것

  - 다형성 지원하기 위한 원칙

  - 인터페이스를 구현한 구현체는 믿고 사용하기 위한 원칙

- EX) 인터페이스 A - 앞으로 가라는 기능

  - 이때 뒤로 가게 구현하면 LSP에 위반되는 내용이다

  - 느리더라도 앞으로 갈 수 있도록 기능을 제공해야함



## ISP : 인터페이스 분리 원칙

- 특정 클라이언트를 위한 인터페이스 여러 개가 범용 인터페이스 하나보다 낫다

  > 큰 덩어리로 구현하는것 보다는 작은 덩어리고 개발하는 것이 좋다

- EX)
  자동차 인터페이스 -> 운전, 정비 인터페이스 로 분리

  - 자동차 하나로 인터페이스를 잡는것 보다는 운전, 장비로 구분
  - 장비에서 문제가 발생했을때에는 장비 인터페이스만 수정
    - 운전자 클라이언트에 영향을 주지 않음

- 인터페이스가 명확해지고, 대체 가능성이 높아진다



### DIP : 의존관계 역전 원칙

- ⭐️ 매우 중요 ⭐️

- 프로그래머는 **추상화에 의존해야지, 구체화에 의존하면 안된다**

  - 구현 클래스에 의존하지 말고, **인터페이스에 의존**해라
  - 클라이언트는 인터페이스를 바라봐야한다
    ( 구현 클래스에 어떻게 작성되어있는지 알필요가 없다 )

- **역할에 의존** , 구현에 의존 (X)

  - 클라이언트가 인터페이스에 의존해야 유연하게 구현체를 변경할 수 있다
  - 구현체에 의존하면 변경이 아주 어려워진다

  

### 문제점 (OCP 문제 계속)

- MemberService는 인터페이스 `MemberRepository` 에 의존하지만, 구현 클래스 `JdbcMemberRepository`에도 동시에 의존한다

- MemberService 클라이언트가 구현 클래스를 직접 선택

  ~~~java
  private MemberRepository memberRepository = new JdbcMemberRepository();
  ~~~

  > 이는 `DIP` 위반
  >
  > - 추상화에도 의존하고, 구체화에도 의존하고있음



## 정리

- 객체지향의 핵심은 `다형성`
- 다형성 만으로는 쉽게 부품을 갈아 끼우듯이 개발할 수 없다
- 다형성 만으로는 구현 객체를 변경할 때 클라이언트도 함께 변경된다
- **다형성 만으로는 OCP, DIP를 지킬 수 없다**
  - 뭔가 더 필요하다 